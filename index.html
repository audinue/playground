<title>Playground</title>

<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-storage-api/1.7.5/jquery.storageapi.min.js"></script>

<textarea id="html-textarea"></textarea>
<textarea id="css-textarea"></textarea>
<textarea id="js-textarea"></textarea>
<iframe id="preview-iframe"></iframe>

<script>

$('#preview-iframe')
	.contents()
	.find('head')
	.append($('<style/>'))
	.append($('<script/>'));

function updateHTML() {
	$('#preview-iframe')
		.contents()
		.find('body')
		.html($('#html-textarea').val());
	$.localStorage.set('html', $('#html-textarea').val());
}

function updateCSS() {
	$('#preview-iframe')
		.contents()
		.find('style')
		.html($('#css-textarea').val());
	$.localStorage.set('css', $('#css-textarea').val());
}

function updateJS() {
	$('#preview-iframe')
		.contents()
		.find('script')
		.replaceWith('<script>' + $('#js-textarea').val() + '<\/script>');
	$.localStorage.set('js', $('#js-textarea').val());
}

$('#html-textarea')
	.on('input', updateHTML);

$('#css-textarea')
	.on('input', updateCSS);

$('#js-textarea')
	.on('input', updateJS);

$(function() {
	$('#html-textarea').val($.localStorage.get('html') || '');
	$('#css-textarea').val($.localStorage.get('css') || '');
	$('#js-textarea').val($.localStorage.get('js') || '');
	updateHTML();
	updateCSS();
	updateJS();
});
</script>